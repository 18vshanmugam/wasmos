#!/usr/bin/env node

let shell = require("shelljs");
let path = require("path")

//Get the root Binaries
let rootBin =  path.resolve(path.dirname( __dirname)+"/../../node_modules/.bin/");
if (shell.ls("./node_modules/.bin").stderr){
  console.log(shell.pwd().stdout)
  process.exit(0)
}

shell.cd("./node_modules/.bin")
// console.log(shell.ls(".").stdout)
shell.ls(rootBin).forEach(bin => {
  let binName = path.basename(bin)
  let dirName = path.join(rootBin, bin);
  let relativeBinary = path.join(path.relative(shell.pwd().stdout, rootBin), binName)
  if (shell.ls(binName).stderr){
    shell.ln("-s", relativeBinary, binName)
  }
})
shell.cd("../..")
console.log(path.basename(shell.pwd().stdout) +"'s '.bin/' linked");
